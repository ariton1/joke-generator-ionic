{"version":3,"sources":["src/app/profile/profile.page.html","src/app/profile/profile.module.ts","src/app/profile/profile.page.scss","src/app/profile/profile.page.ts","src/app/services/profile.service.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Profile Page</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"logOut()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-list-header> Personal Information </ion-list-header>\\n  </ion-list>\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  \\n\\n  <ion-item (click)=\\\"updateEmail()\\\">\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col class=\\\"text-left\\\" size=\\\"5\\\"> Email </ion-col>\\n          <ion-col class=\\\"text-center\\\" size=\\\"7\\\" *ngIf=\\\"userProfile?.email\\\">\\n            {{userProfile?.email}}\\n          </ion-col>\\n          <ion-col size=\\\"7\\\" class=\\\"placeholder-profile text-center\\\" *ngIf=\\\"!userProfile?.email\\\">\\n            <span> Tap here to edit. </span>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  </ion-item>\\n\\n  <ion-item (click)=\\\"updatePassword()\\\">\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col class=\\\"text-left\\\" size=\\\"5\\\"> Password </ion-col>\\n          <ion-col class=\\\"text-center\\\" size=\\\"7\\\" class=\\\"placeholder-profile\\\">\\n            <span> Tap here to edit. </span>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  </ion-item>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","export default \"ion-list-header {\\n  background-color: #ececec;\\n}\\n\\n.text-center {\\n  text-align: center;\\n}\\n\\n.text-left {\\n  text-align: left;\\n}\\n\\n.placeholder-profile {\\n  color: #cccccc;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9yb290L2lvbmljcHJvamVjdHMvam9rZS1nZW5lcmF0b3Ivc3JjL2FwcC9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIiwic3JjL2FwcC9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQUE7QUNDSjs7QURFRTtFQUNFLGtCQUFBO0FDQ0o7O0FERUU7RUFDRSxnQkFBQTtBQ0NKOztBREVFO0VBQ0UsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1saXN0LWhlYWRlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VjZWNlYztcbiAgfVxuICBcbiAgLnRleHQtY2VudGVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbiAgXG4gIC50ZXh0LWxlZnQge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cbiAgXG4gIC5wbGFjZWhvbGRlci1wcm9maWxlIHtcbiAgICBjb2xvcjogI2NjY2NjYztcbiAgfSIsImlvbi1saXN0LWhlYWRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlY2VjZWM7XG59XG5cbi50ZXh0LWNlbnRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRleHQtbGVmdCB7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG59XG5cbi5wbGFjZWhvbGRlci1wcm9maWxlIHtcbiAgY29sb3I6ICNjY2NjY2M7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Router } from '@angular/router';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { AlertController } from '@ionic/angular';\nimport { UserProfile } from 'src/app/models/user';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss']\n})\nexport class ProfilePage implements OnInit {\n  public userProfile: UserProfile;\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private profileService: ProfileService,\n    private alertCtrl: AlertController\n  ) {}\n\n  ngOnInit() {\n    this.profileService.getUserProfile().then(profile$ => {\n      profile$.subscribe(userProfile => {\n        this.userProfile = userProfile;\n      });\n    });\n  }\n\n  async logOut(): Promise<void> {\n    await this.authService.logout();\n    this.router.navigateByUrl('login');\n  }\n\n\n  async updateEmail(): Promise<void> {\n    const alert = await this.alertCtrl.create({\n      inputs: [\n        { type: 'text', name: 'newEmail', placeholder: 'Your new email' },\n        { name: 'password', placeholder: 'Your password', type: 'password' }\n      ],\n      buttons: [\n        { text: 'Cancel' },\n        {\n          text: 'Save',\n          handler: data => {\n            this.profileService\n              .updateEmail(data.newEmail, data.password)\n              .then(() => {\n                console.log('Email Changed Successfully');\n              })\n              .catch(error => {\n                console.log('ERROR: ' + error.message);\n              });\n          }\n        }\n      ]\n    });\n    return await alert.present();\n  }\n\n  async updatePassword(): Promise<void> {\n    const alert = await this.alertCtrl.create({\n      inputs: [\n        { name: 'newPassword', placeholder: 'New password', type: 'password' },\n        { name: 'oldPassword', placeholder: 'Old password', type: 'password' }\n      ],\n      buttons: [\n        { text: 'Cancel' },\n        {\n          text: 'Save',\n          handler: data => {\n            this.profileService.updatePassword(\n              data.newPassword,\n              data.oldPassword\n            );\n          }\n        }\n      ]\n    });\n    return await alert.present();\n  }\n}","import { Injectable } from '@angular/core';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument\n} from '@angular/fire/firestore';\nimport { AuthService } from './auth.service'\nimport { Observable } from 'rxjs';\n\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { UserProfile } from '../models/user';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProfileService {\n  private userProfile: AngularFirestoreDocument<UserProfile>;\n  private currentUser: firebase.User;\n  constructor(\n    private firestore: AngularFirestore,\n    private authService: AuthService\n  ) {}\n\n  async getUserProfile(): Promise<Observable<UserProfile>> {\n    const user: firebase.User = await this.authService.getUser();\n    this.currentUser = user;\n    this.userProfile = this.firestore.doc(`userProfile/${user.uid}`);\n    return this.userProfile.valueChanges();\n   }\n\n   updateName(fullName: string): Promise<void> {\n    return this.userProfile.update({ fullName });\n   }\n\n   async updateEmail(newEmail: string, password: string): Promise<void> {\n    const credential: firebase.auth.AuthCredential = firebase.auth.EmailAuthProvider.credential(\n    this.currentUser.email,\n    password\n    );\n    try {\n    await this.currentUser.reauthenticateWithCredential(credential);\n    await this.currentUser.updateEmail(newEmail);\n    return this.userProfile.update({ email: newEmail });\n    } catch (error) {\n    console.error(error);\n    }\n   }\n\n   async updatePassword(\n    newPassword: string,\n    oldPassword: string\n  ): Promise<void> {\n    const credential: firebase.auth.AuthCredential = firebase.auth.EmailAuthProvider.credential(\n      this.currentUser.email,\n      oldPassword\n    );\n    try {\n      await this.currentUser.reauthenticateWithCredential(credential);\n      return this.currentUser.updatePassword(newPassword);\n    } catch (error) {\n    console.error(error);\n    }\n  }\n\n\n}\n"],"sourceRoot":"webpack:///","file":"profile-profile-module-es5.js"}