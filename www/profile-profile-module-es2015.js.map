{"version":3,"sources":["./src/app/profile/profile.page.html","./src/app/profile/profile.module.ts","./src/app/profile/profile.page.scss","./src/app/profile/profile.page.ts","./src/app/services/profile.service.ts"],"names":[],"mappings":"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","file":"profile-profile-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Profile Page</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"logOut()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-list-header> Personal Information </ion-list-header>\\n  </ion-list>\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  \\n\\n  <ion-item (click)=\\\"updateEmail()\\\">\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col class=\\\"text-left\\\" size=\\\"5\\\"> Email </ion-col>\\n          <ion-col class=\\\"text-center\\\" size=\\\"7\\\" *ngIf=\\\"userProfile?.email\\\">\\n            {{userProfile?.email}}\\n          </ion-col>\\n          <ion-col size=\\\"7\\\" class=\\\"placeholder-profile text-center\\\" *ngIf=\\\"!userProfile?.email\\\">\\n            <span> Tap here to edit. </span>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  </ion-item>\\n\\n  <ion-item (click)=\\\"updatePassword()\\\">\\n    <ion-label>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col class=\\\"text-left\\\" size=\\\"5\\\"> Password </ion-col>\\n          <ion-col class=\\\"text-center\\\" size=\\\"7\\\" class=\\\"placeholder-profile\\\">\\n            <span> Tap here to edit. </span>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-label>\\n  </ion-item>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","export default \"ion-list-header {\\n  background-color: #ececec;\\n}\\n\\n.text-center {\\n  text-align: center;\\n}\\n\\n.text-left {\\n  text-align: left;\\n}\\n\\n.placeholder-profile {\\n  color: #cccccc;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9yb290L2lvbmljcHJvamVjdHMvam9rZS1nZW5lcmF0b3Ivc3JjL2FwcC9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIiwic3JjL2FwcC9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQUE7QUNDSjs7QURFRTtFQUNFLGtCQUFBO0FDQ0o7O0FERUU7RUFDRSxnQkFBQTtBQ0NKOztBREVFO0VBQ0UsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1saXN0LWhlYWRlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VjZWNlYztcbiAgfVxuICBcbiAgLnRleHQtY2VudGVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbiAgXG4gIC50ZXh0LWxlZnQge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cbiAgXG4gIC5wbGFjZWhvbGRlci1wcm9maWxlIHtcbiAgICBjb2xvcjogI2NjY2NjYztcbiAgfSIsImlvbi1saXN0LWhlYWRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlY2VjZWM7XG59XG5cbi50ZXh0LWNlbnRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRleHQtbGVmdCB7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG59XG5cbi5wbGFjZWhvbGRlci1wcm9maWxlIHtcbiAgY29sb3I6ICNjY2NjY2M7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Router } from '@angular/router';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { AlertController } from '@ionic/angular';\nimport { UserProfile } from 'src/app/models/user';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss']\n})\nexport class ProfilePage implements OnInit {\n  public userProfile: UserProfile;\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private profileService: ProfileService,\n    private alertCtrl: AlertController\n  ) {}\n\n  ngOnInit() {\n    this.profileService.getUserProfile().then(profile$ => {\n      profile$.subscribe(userProfile => {\n        this.userProfile = userProfile;\n      });\n    });\n  }\n\n  async logOut(): Promise<void> {\n    await this.authService.logout();\n    this.router.navigateByUrl('login');\n  }\n\n\n  async updateEmail(): Promise<void> {\n    const alert = await this.alertCtrl.create({\n      inputs: [\n        { type: 'text', name: 'newEmail', placeholder: 'Your new email' },\n        { name: 'password', placeholder: 'Your password', type: 'password' }\n      ],\n      buttons: [\n        { text: 'Cancel' },\n        {\n          text: 'Save',\n          handler: data => {\n            this.profileService\n              .updateEmail(data.newEmail, data.password)\n              .then(() => {\n                console.log('Email Changed Successfully');\n              })\n              .catch(error => {\n                console.log('ERROR: ' + error.message);\n              });\n          }\n        }\n      ]\n    });\n    return await alert.present();\n  }\n\n  async updatePassword(): Promise<void> {\n    const alert = await this.alertCtrl.create({\n      inputs: [\n        { name: 'newPassword', placeholder: 'New password', type: 'password' },\n        { name: 'oldPassword', placeholder: 'Old password', type: 'password' }\n      ],\n      buttons: [\n        { text: 'Cancel' },\n        {\n          text: 'Save',\n          handler: data => {\n            this.profileService.updatePassword(\n              data.newPassword,\n              data.oldPassword\n            );\n          }\n        }\n      ]\n    });\n    return await alert.present();\n  }\n}","import { Injectable } from '@angular/core';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument\n} from '@angular/fire/firestore';\nimport { AuthService } from './auth.service'\nimport { Observable } from 'rxjs';\n\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { UserProfile } from '../models/user';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProfileService {\n  private userProfile: AngularFirestoreDocument<UserProfile>;\n  private currentUser: firebase.User;\n  constructor(\n    private firestore: AngularFirestore,\n    private authService: AuthService\n  ) {}\n\n  async getUserProfile(): Promise<Observable<UserProfile>> {\n    const user: firebase.User = await this.authService.getUser();\n    this.currentUser = user;\n    this.userProfile = this.firestore.doc(`userProfile/${user.uid}`);\n    return this.userProfile.valueChanges();\n   }\n\n   updateName(fullName: string): Promise<void> {\n    return this.userProfile.update({ fullName });\n   }\n\n   async updateEmail(newEmail: string, password: string): Promise<void> {\n    const credential: firebase.auth.AuthCredential = firebase.auth.EmailAuthProvider.credential(\n    this.currentUser.email,\n    password\n    );\n    try {\n    await this.currentUser.reauthenticateWithCredential(credential);\n    await this.currentUser.updateEmail(newEmail);\n    return this.userProfile.update({ email: newEmail });\n    } catch (error) {\n    console.error(error);\n    }\n   }\n\n   async updatePassword(\n    newPassword: string,\n    oldPassword: string\n  ): Promise<void> {\n    const credential: firebase.auth.AuthCredential = firebase.auth.EmailAuthProvider.credential(\n      this.currentUser.email,\n      oldPassword\n    );\n    try {\n      await this.currentUser.reauthenticateWithCredential(credential);\n      return this.currentUser.updatePassword(newPassword);\n    } catch (error) {\n    console.error(error);\n    }\n  }\n\n\n}\n"],"sourceRoot":"webpack:///"}